@tailwind base;
@tailwind components;
@tailwind utilities;

/* 基础样式 - 移动端优化 */
@layer base {
  html {
    /* 改善移动端滚动性能 */
    -webkit-overflow-scrolling: touch;
    /* 防止 iOS Safari 的橡皮筋效果 */
    overscroll-behavior-y: contain;
    /* 防止 iOS 自动“字体放大/缩小”导致布局跳动 */
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }
  
  body {
    /* 防止移动端双击缩放 */
    touch-action: manipulation;
    /* 改善字体渲染 */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /*
    iOS Safari: 当 input/textarea 的字体 < 16px 时，聚焦会触发页面自动 zoom，
    造成“整体变大、超出屏幕”的体验。
    这里用 !important 覆盖 Tailwind 的 text-xs/text-sm，避免自动 zoom。
  */
  @supports (-webkit-touch-callout: none) {
    input,
    textarea,
    select {
      font-size: 16px !important;
      line-height: 1.25rem; /* 20px */
    }
  }
}

/* 移动端响应式工具类 */
@layer utilities {
  /* 安全区域适配 */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-right {
    padding-right: env(safe-area-inset-right);
  }
  
  /* 移动端优化的触摸反馈 */
  .touch-feedback:active {
    opacity: 0.7;
    transform: scale(0.98);
  }
  
  /* 改善移动端输入框体验 */
  input, textarea, select {
    font-size: 16px; /* 防止 iOS 自动缩放 */
  }
  
  /* 移动端优化的滚动容器 */
  .mobile-scroll {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }
}
